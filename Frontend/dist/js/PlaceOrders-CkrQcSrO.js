import{j as e,c as t}from"./ui-vendor-D_YnDhxq.js";import{u as s,c as a,a as i}from"./react-vendor-B1YRfcvv.js";import{V as r,W as l,t as n,d as o,R as d,ai as c,aa as m,aj as g,a2 as x}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";const h={"child-full":{title:"Child Full Package",price:"$49.99",priceNumber:49.99,subtitle:"Comprehensive pediatric bundle"},infant:{title:"Infant Screening",price:"$16.89",priceNumber:16.89,subtitle:"Newborn screens & vitamin checks"},toddler:{title:"Toddler Package",price:"$29.99",priceNumber:29.99,subtitle:"Lead & development screening"},teen:{title:"Teen Health Check",price:"$39.99",priceNumber:39.99,subtitle:"Wellness & sports physicals"},"":{title:"Custom Booking",price:"Varies",priceNumber:0,subtitle:"Select your package on the previous page"}},u=()=>{const e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,10)};function p(){const p=s(),b=a(),f=i.useMemo(()=>{try{return new URLSearchParams(b.search).get("package")||""}catch{return""}},[b.search]),[j,N]=i.useState({name:"",email:"",phoneNumber:"",gender:"Male",age:"",address:"",state:"",country:"Ghana",collectionMethod:"",bookingDate:"",bookingTime:"",package:f||""}),[v,y]=i.useState({}),[k,w]=i.useState(!1);i.useEffect(()=>{N(e=>({...e,package:f||e.package}))},[f]);const C=h[j.package]||h[""],S=e=>{const{name:t,value:s}=e.target;N(e=>({...e,[t]:s})),v[t]&&y(e=>({...e,[t]:void 0}))},M=e=>{N(t=>({...t,collectionMethod:e})),y(e=>({...e,collectionMethod:void 0}))},D=()=>{const e=j.package||f||"",t=h[e]||h[""];return{_id:e?`${e}`:`custom-${Date.now()}`,name:t.title,price:Number(t.priceNumber||0),quantity:1}},T=e=>{try{localStorage.setItem("bookingData",JSON.stringify(e));const t=j.package?[D()]:[];localStorage.setItem("cartItems",JSON.stringify(t)),localStorage.setItem("cart",JSON.stringify(t))}catch(t){}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>p(-1),className:"inline-flex items-center gap-2 text-gray-700 hover:text-gray-900 focus:outline-none","aria-label":"Back to previous",children:[e.jsx(r,{})," Back"]}),e.jsx("div",{className:"ml-auto text-sm text-gray-600",children:"Secure • Private • Clinician-reviewed reports"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!k)if((()=>{const e={};j.collectionMethod||(e.collectionMethod="Select a collection method."),(!j.name||j.name.trim().length<2)&&(e.name="Please enter a valid full name."),j.email&&/^\S+@\S+\.\S+$/.test(j.email)||(e.email="Enter a valid email address."),j.phoneNumber&&/^[\d+\-\s()]{7,20}$/.test(j.phoneNumber)||(e.phoneNumber="Enter a valid phone number.");const t=Number(j.age);return(!j.age||Number.isNaN(t)||t<=0||t>120)&&(e.age="Enter a valid age."),j.bookingDate?j.bookingDate<u()&&(e.bookingDate="Booking date cannot be in the past."):e.bookingDate="Select a booking date.",j.bookingTime||(e.bookingTime="Select a booking time."),(!j.address||j.address.trim().length<4)&&(e.address="Enter a more specific address."),(!j.state||j.state.trim().length<2)&&(e.state="Enter your province/state."),y(e),0===Object.keys(e).length})()){w(!0);try{T(j),t.success("Booking saved — confirming..."),setTimeout(()=>{p("/confirm-booking",{state:{booking:j}})},350)}catch(s){t.error("Could not save booking — try again"),w(!1)}}else t.error("Please fix the highlighted fields")},className:"lg:col-span-2 bg-white rounded-xl shadow-md border border-gray-100 p-6 space-y-6",noValidate:!0,children:[e.jsxs("header",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Confirm your booking"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Fill in details below and choose how you'd like samples collected."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Selected package"}),e.jsx("div",{className:"font-semibold text-gray-800",children:C.title})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Collection method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",role:"radio","aria-checked":"Home Collection"===j.collectionMethod,onClick:()=>M("Home Collection"),className:"flex items-center gap-3 px-4 py-3 border rounded-lg transition focus:ring-2 focus:ring-offset-1 focus:ring-indigo-200 justify-center "+("Home Collection"===j.collectionMethod?"bg-indigo-600 text-white border-transparent shadow":"bg-white text-gray-700 border-gray-200 hover:shadow-sm"),children:[e.jsx(l,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Home collection"}),e.jsx("div",{className:"text-xs text-gray-400",children:"We visit your preferred address"})]})]}),e.jsxs("button",{type:"button",role:"radio","aria-checked":"Lab Visit"===j.collectionMethod,onClick:()=>M("Lab Visit"),className:"flex items-center gap-3 px-4 py-3 border rounded-lg transition focus:ring-2 focus:ring-offset-1 focus:ring-indigo-200 justify-center "+("Lab Visit"===j.collectionMethod?"bg-indigo-600 text-white border-transparent shadow":"bg-white text-gray-700 border-gray-200 hover:shadow-sm"),children:[e.jsx(n,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Lab visit"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Visit our accredited partner lab"})]})]})]}),v.collectionMethod&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.collectionMethod})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Full name"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"name",value:j.name,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.name?"border-red-300":"border-gray-200"),placeholder:"Jane Doe","aria-invalid":v.name?"true":"false"}),e.jsx(o,{className:"absolute right-3 top-3 text-gray-300"})]}),v.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"email",type:"email",value:j.email,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.email?"border-red-300":"border-gray-200"),placeholder:"you@example.com","aria-invalid":v.email?"true":"false"}),e.jsx(d,{className:"absolute right-3 top-3 text-gray-300"})]}),v.email&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Phone"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"phoneNumber",type:"tel",value:j.phoneNumber,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.phoneNumber?"border-red-300":"border-gray-200"),placeholder:"+233 24 000 0000","aria-invalid":v.phoneNumber?"true":"false"}),e.jsx(c,{className:"absolute right-3 top-3 text-gray-300"})]}),v.phoneNumber&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Age"}),e.jsx("input",{name:"age",type:"number",value:j.age,onChange:S,min:0,max:120,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.age?"border-red-300":"border-gray-200"),placeholder:"e.g., 34","aria-invalid":v.age?"true":"false"}),v.age&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.age})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",value:j.gender,onChange:S,className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-200",children:[e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"}),e.jsx("option",{children:"Other"}),e.jsx("option",{children:"Prefer not to say"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"State / Province"}),e.jsx("input",{name:"state",value:j.state,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.state?"border-red-300":"border-gray-200"),placeholder:"Greater Accra","aria-invalid":v.state?"true":"false"}),v.state&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.state})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Address"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"address",value:j.address,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.address?"border-red-300":"border-gray-200"),placeholder:"Street address, area, city","aria-invalid":v.address?"true":"false"}),e.jsx(m,{className:"absolute right-3 top-3 text-gray-300"})]}),v.address&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.address})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Booking date"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"bookingDate",type:"date",value:j.bookingDate,onChange:S,min:u(),required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.bookingDate?"border-red-300":"border-gray-200"),"aria-invalid":v.bookingDate?"true":"false"}),e.jsx(g,{className:"absolute right-3 top-3 text-gray-300"})]}),v.bookingDate&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.bookingDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Booking time"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{name:"bookingTime",type:"time",value:j.bookingTime,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-indigo-200 "+(v.bookingTime?"border-red-300":"border-gray-200"),"aria-invalid":v.bookingTime?"true":"false"}),e.jsx(x,{className:"absolute right-3 top-3 text-gray-300"})]}),v.bookingTime&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.bookingTime})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{N({name:"",email:"",phoneNumber:"",gender:"Male",age:"",address:"",state:"",country:"Ghana",collectionMethod:"",bookingDate:"",bookingTime:"",package:f||""}),y({}),t.success("Form cleared")},className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-red-200 text-red-600 hover:bg-red-50",children:"Clear"}),e.jsx("div",{className:"flex items-center gap-3 ml-auto",children:e.jsx("button",{type:"submit",disabled:k,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-5 py-2 rounded-lg shadow hover:bg-indigo-700 disabled:opacity-60",children:k?"Processing...":"Confirm booking"})})]})]}),e.jsx("aside",{className:"relative",children:e.jsxs("div",{className:"sticky top-6 bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold",children:C.title.split(" ").slice(0,1)[0].charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Package"}),e.jsx("div",{className:"font-semibold text-gray-900",children:C.title}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:C.subtitle})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Price"}),e.jsx("div",{className:"text-right font-medium",children:C.price}),e.jsx("div",{className:"text-gray-500",children:"Collection"}),e.jsx("div",{className:"text-right",children:j.collectionMethod||"Not selected"}),e.jsx("div",{className:"text-gray-500",children:"Date"}),e.jsx("div",{className:"text-right",children:j.bookingDate||"—"}),e.jsx("div",{className:"text-gray-500",children:"Time"}),e.jsx("div",{className:"text-right",children:j.bookingTime||"—"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{j.collectionMethod?j.name&&j.phoneNumber?(T(j),p("/confirm-booking",{state:{booking:j}})):t("Please complete name & phone in the form",{icon:"ℹ️"}):t.error("Please select a collection method first")},className:"w-full inline-flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Proceed to confirmation"})}),e.jsx("div",{className:"mt-4 text-xs text-gray-400",children:"We follow strict privacy & sample handling procedures. You can change details at the confirmation step."})]})})]})]})}export{p as default};
