import{j as e,V as a}from"./ui-vendor-D_YnDhxq.js";import{k as s,a as t,u as r}from"./react-vendor-B1YRfcvv.js";import{a as c}from"./utils-vendor-B4hhIH4d.js";import{K as i,w as l,V as o,o as d,l as n,i as m,aS as p,aT as h}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";const x=()=>{const[x]=s(),[u,y]=t.useState([]),[g,b]=t.useState(!0),j=x.get("q"),f=r();if(t.useEffect(()=>{j&&(async()=>{try{b(!0);const e=await c.get(`/api/search/all?query=${j}`);y(e.data.data)}catch(e){a.error("Error fetching search results")}finally{b(!1)}})()},[j]),g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(i,{className:"animate-spin text-4xl text-primary"})});if(!u||0===u.length)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(l,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try different keywords or check your spelling"}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:e.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-5 py-2 bg-gray-100 text-primary rounded-lg hover:bg-gray-200 border border-primary transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7m-9 2v8m4-8v8m5 0a2 2 0 002-2v-5a2 2 0 00-2-2h-1m-10 0a2 2 0 00-2 2v5a2 2 0 002 2h1"})}),"Home Page"]})})]});const N=a=>{switch(a){case"test":return e.jsx(h,{className:"text-blue-500"});case"package":return e.jsx(p,{className:"text-green-500"});case"lab":return e.jsx(m,{className:"text-purple-500"});case"health-concern":return e.jsx(n,{className:"text-red-500"});case"most-used-test":return e.jsx(d,{className:"text-indigo-500"});default:return e.jsx(l,{className:"text-gray-500"})}},v={"heart health":"/heart-health","diabetes care":"/diabetes-care","women's health":"/women's-health","men's health":"/men's-health","senior care":"/senior-care","child health":"/child-health"},k={"complete blood count (cbc)":"/most-used/cbc","lipid profile":"/most-used/lipid-profile","thyroid profile":"/most-used/thyroid-profile","diabetes screening":"/most-used/diabetes-screening"},w={"about us":"/about",contact:"/contact",join:"/join","privacy policy":"/privacy-policy",testimonials:"/testimonials",features:"/features","why us":"/why-us",faq:"/faq","symptom checker":"/symptoms",partners:"/partners",services:"/services",home:"/"};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("button",{className:"flex items-center text-primary hover:underline mb-6",onClick:()=>f("/"),children:[e.jsx(o,{className:"mr-2"})," Back to Home"]}),e.jsxs("h1",{className:"text-2xl font-semibold mb-2",children:['Search Results for "',j,'"']}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>(e=>{switch(e.type){case"test":f(`/labs/${e.lab}/testpackage?type=test&id=${e._id}`);break;case"package":f(`/labs/${e.lab}/testpackage?type=package&id=${e._id}`);break;case"lab":f(`/labs/${e._id}/details`);break;case"health-concern":{const a=v[e.displayName.toLowerCase()];a?f(a):e.path&&f(e.path);break}case"most-used-test":{const a=k[e.displayName.toLowerCase()];a?f(a):e.path&&f(e.path);break}case"static-page":{const a=w[e.displayName.toLowerCase()];a?f(a):e.path&&f(e.path);break}}})(s),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[N(s.type),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500 capitalize",children:s.type.replace("-"," ")})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.displayName}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.displayDescription}),s.price&&e.jsxs("div",{className:"text-blue-600 font-semibold",children:["$",s.price]}),s.labName&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Lab: ",s.labName]}),s.address&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:s.address}),("test"===s.type||"package"===s.type)&&s.lab&&e.jsx("button",{className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark",onClick:e=>{e.stopPropagation(),(async e=>{var s,t;try{const s=await c.post("/api/cart/add",{testOrPackageId:e._id,type:"package"===e.type?"Package":"Test",name:e.displayName,price:e.price,labId:e.lab,quantity:1},{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});s.data.success?(a.success("Added to cart!"),f("/place-order")):a.error(s.data.message||"Failed to add to cart")}catch(r){a.error((null==(t=null==(s=r.response)?void 0:s.data)?void 0:t.message)||"Failed to add to cart")}})(s)},children:"Add to Cart"})]},s._id))})]})};export{x as default};
