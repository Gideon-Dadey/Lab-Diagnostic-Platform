import{j as e}from"./ui-vendor-D_YnDhxq.js";import{a,c as s}from"./react-vendor-B1YRfcvv.js";import{u as t}from"./index-BIodPqjN.js";import{F as r,a as l}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";const o=()=>{const[o,i]=a.useState({firstName:"",lastName:"",email:"",profileImage:""}),[n,d]=a.useState(null),[c,m]=a.useState(!1),[p,u]=a.useState({currentPassword:"",newPassword:""}),[h,x]=a.useState(!1),[g,f]=a.useState(!1),[w,j]=a.useState("profile"),y=s();a.useEffect(()=>{N()},[y.pathname]);const N=async()=>{try{const e=await fetch("/api/superadmin/get-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),a=await e.json();e.ok?(i({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",profileImage:a.profileImage||""}),d(a.profileImage||"")):t.error(a.message||"Failed to fetch profile")}catch(e){t.error("Something went wrong fetching profile")}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-8 shadow-lg rounded-lg mt-16",children:[e.jsxs("div",{className:"flex justify-center space-x-4 mb-8",children:[e.jsx("button",{onClick:()=>j("profile"),className:"px-4 py-2 rounded-md font-semibold "+("profile"===w?"bg-primary text-white":"bg-gray-400 text-white"),children:"Profile"}),e.jsx("button",{onClick:()=>j("password"),className:"px-4 py-2 rounded-md font-semibold "+("password"===w?"bg-secondary text-white":"bg-gray-400 text-white"),children:"Change Password"})]}),"profile"===w&&e.jsx("div",{className:"space-y-6",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("img",{src:n||"https://via.placeholder.com/150",alt:"Profile Preview",className:"w-32 h-32 rounded-full object-cover shadow-md"}),e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];a&&(i(e=>({...e,profileImage:a})),d(URL.createObjectURL(a)))},className:"w-full border p-2 rounded-md text-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"First Name"}),e.jsx("input",{type:"text",value:o.firstName,onChange:e=>i(a=>({...a,firstName:e.target.value})),className:"border p-2 w-full rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Last Name"}),e.jsx("input",{type:"text",value:o.lastName,onChange:e=>i(a=>({...a,lastName:e.target.value})),className:"border p-2 w-full rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Email"}),e.jsx("input",{type:"email",value:o.email,onChange:e=>i(a=>({...a,email:e.target.value})),className:"border p-2 w-full rounded-md"})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("button",{onClick:async()=>{try{const e=new FormData;e.append("firstName",o.firstName),e.append("lastName",o.lastName),e.append("email",o.email),o.profileImage instanceof File&&e.append("profileImage",o.profileImage);const a=await fetch("/api/superadmin/update-settings",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:e}),s=await a.json();a.ok?(t.success("Profile updated successfully"),m(!1),N()):t.error(s.message||"Failed to update profile")}catch(e){t.error("Something went wrong updating profile")}},className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-all",children:"Save"}),e.jsx("button",{onClick:()=>{m(!1),N()},className:"bg-gray-400 text-white px-6 py-2 rounded-md hover:bg-gray-500 transition-all",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:n||"https://via.placeholder.com/150",alt:"Profile",className:"w-32 h-32 rounded-full object-cover shadow-md"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800",children:[o.firstName," ",o.lastName]}),e.jsx("p",{className:"text-gray-500",children:o.email}),e.jsx("button",{onClick:()=>m(!0),className:"mt-4 bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-all",children:"Edit Profile"})]})]})}),"password"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",placeholder:"Current Password",value:p.currentPassword,onChange:e=>u(a=>({...a,currentPassword:e.target.value})),className:"border p-2 w-full rounded-md"}),e.jsx("button",{type:"button",onClick:()=>x(e=>!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:h?e.jsx(r,{}):e.jsx(l,{})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",placeholder:"New Password",value:p.newPassword,onChange:e=>u(a=>({...a,newPassword:e.target.value})),className:"border p-2 w-full rounded-md"}),e.jsx("button",{type:"button",onClick:()=>f(e=>!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:g?e.jsx(r,{}):e.jsx(l,{})})]}),e.jsx("button",{onClick:async()=>{try{const e=await fetch("/api/superadmin/password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(p)}),a=await e.json();e.ok?(t.success("Password changed successfully"),u({currentPassword:"",newPassword:""})):t.error(a.message||"Failed to change password")}catch(e){t.error("Something went wrong changing password")}},className:"w-full bg-secondary text-white px-6 py-2 rounded-md hover:bg-secondary-dark transition-all",children:"Update Password"})]})]})};export{o as default};
