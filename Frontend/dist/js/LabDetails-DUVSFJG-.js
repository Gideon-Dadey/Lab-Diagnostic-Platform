import{j as e,c as s}from"./ui-vendor-D_YnDhxq.js";import{f as a,u as t,a as l}from"./react-vendor-B1YRfcvv.js";import{a as r}from"./utils-vendor-B4hhIH4d.js";import{V as i,s as n,aa as c,ai as o,R as d,a2 as m}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";function x(){var x,p;const{id:h}=a(),g=t(),[b,j]=l.useState(null),[u,N]=l.useState(!0),[v,f]=l.useState([]),[y,w]=l.useState(0),[k,S]=l.useState(""),[C,$]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const[e,s]=await Promise.all([r.get(`/api/labs/public/${h}`),r.get(`/api/labs/${h}/reviews`)]);j(e.data.lab),f(s.data.reviews)}catch(e){}finally{N(!1)}})()},[h]);return u?e.jsx("p",{className:"text-center text-primary mt-32",children:"Loading lab details..."}):b?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 mt-20",children:[e.jsxs("button",{onClick:()=>g(-1),className:"flex items-center gap-2 text-primary hover:underline font-medium text-lg mb-8",children:[e.jsx(i,{className:"text-primary"}),"Back to Labs"]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8",children:e.jsxs("div",{className:"relative h-96",children:[e.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:b.name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:[e.jsx(n,{className:"text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:(null==(x=b.rating)?void 0:x.toFixed(1))||"New"})]}),e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(b.address+", "+b.location)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-primary transition-colors",children:[e.jsx(c,{}),e.jsxs("span",{children:[b.address,", ",b.location]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Introduction"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:b.description})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reviews & Ratings"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{className:"text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:(null==(p=b.rating)?void 0:p.toFixed(1))||"New"})]}),e.jsxs("span",{className:"text-gray-500",children:["(",b.ratingCount||0," reviews)"]})]})]}),e.jsxs("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Write a Review"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>w(s),className:"text-2xl transition-colors "+(s<=y?"text-yellow-400":"text-gray-300"),children:e.jsx(n,{})},s))}),e.jsx("textarea",{value:k,onChange:e=>S(e.target.value),placeholder:"Write your review...",className:"w-full p-3 border rounded-lg mb-4 focus:ring-2 focus:ring-primary focus:border-primary",rows:"3"}),e.jsx("button",{onClick:async()=>{var e,a;if(y&&k.trim())try{$(!0);await r.post(`/api/labs/${h}/reviews`,{rating:y,comment:k},{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});const e=await r.get(`/api/labs/${h}/reviews`);f(e.data.reviews);const a=await r.get(`/api/labs/public/${h}`);j(a.data.lab),s.success("Review submitted successfully!"),w(0),S("")}catch(t){s.error((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Failed to submit review")}finally{$(!1)}else s.error("Please provide both rating and review text")},disabled:C,className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark transition-colors "+(C?"opacity-50 cursor-not-allowed":""),children:C?"Submitting...":"Submit Review"})]}),e.jsxs("div",{className:"space-y-6",children:[v.map(s=>e.jsxs("div",{className:"border-b pb-6 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,t)=>e.jsx(n,{className:"text-sm "+(t<s.rating?"text-yellow-400":"text-gray-300")},t))}),e.jsxs("span",{className:"font-medium",children:[s.user.firstName," ",s.user.lastName]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-600",children:s.comment})]},s._id)),0===v.length&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No reviews yet. Be the first to review!"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:b.phone||"Not available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:b.email||"Not available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:b.timing||"Not available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"text-primary"}),e.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(b.address+", "+b.location)}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View on Google Maps"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Tests & Packages"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Explore our comprehensive range of diagnostic tests and health packages."}),e.jsx("button",{onClick:()=>g(`/labs/${h}/testpackage`),className:"w-full bg-primary text-white font-semibold px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors",children:"View All Tests & Packages"})]})]})]})]}):e.jsx("p",{className:"text-center text-error mt-32",children:"Lab not found."})}export{x as default};
