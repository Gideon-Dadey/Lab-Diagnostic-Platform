import{G as e,j as a}from"./ui-vendor-D_YnDhxq.js";import{a as t}from"./react-vendor-B1YRfcvv.js";import{u as s}from"./index-BIodPqjN.js";import{d as i,R as l,ac as r,ad as n,ae as o,i as d,af as c}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";function m(a){return e({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Location_On"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,21.933a1.715,1.715,0,0,1-1.384-.691L5.555,14.5a7.894,7.894,0,1,1,12.885-.009L13.385,21.24A1.717,1.717,0,0,1,12,21.933ZM11.992,3.066A6.81,6.81,0,0,0,7.414,4.815a6.891,6.891,0,0,0-1.05,9.1l5.051,6.727a.725.725,0,0,0,.584.292h0a.732.732,0,0,0,.586-.292l5.044-6.734A6.874,6.874,0,0,0,12.81,3.113,7.277,7.277,0,0,0,11.992,3.066Z"},child:[]},{tag:"path",attr:{d:"M12,12.5A2.5,2.5,0,1,1,14.5,10,2.5,2.5,0,0,1,12,12.5Zm0-4A1.5,1.5,0,1,0,13.5,10,1.5,1.5,0,0,0,12,8.5Z"},child:[]}]}]}]})(a)}const p=()=>{const[e,i]=t.useState("profile"),[l,r]=t.useState(null),[n,o]=t.useState(null),[d,c]=t.useState(!0),[m,p]=t.useState(!1),[h,u]=t.useState(!1),[f,j]=t.useState({}),[b,v]=t.useState({}),[N,y]=t.useState(null),[w,A]=t.useState(null);t.useEffect(()=>{F()},[]);const F=async()=>{try{const e=await fetch("/api/labadmin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),a=await e.json();a.success&&(r(a.labAdmin),j({firstName:a.labAdmin.firstName||"",lastName:a.labAdmin.lastName||"",phoneNo:a.labAdmin.phoneNo||"",email:a.labAdmin.email||""}),y(a.labAdmin.image||""));const t=await fetch("/api/labadmin/lab",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),s=await t.json();s.success&&(o(s.lab),v({name:s.lab.name||"",location:s.lab.location||"",address:s.lab.address||"",isActive:s.lab.isActive??!0}),A(s.lab.image||""))}catch(e){s.error("Error fetching data")}finally{c(!1)}};return d?a.jsx("div",{className:"text-center py-10",children:"Loading..."}):a.jsxs("div",{className:"bg-bg-primary p-8 rounded-lg shadow-primary mt-10 w-full max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Welcome to Lab Admin Profile Settings"}),a.jsx("p",{className:"text.text-secondary",children:"Manage your personal and lab details from here."})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>i("profile"),className:"px-4 py-2 rounded-md font-semibold "+("profile"===e?"bg-primary text-white":"bg.gray.light text.text-dark"),children:"Profile"}),a.jsx("button",{onClick:()=>i("lab"),className:"px-4 py-2 rounded-md font-semibold "+("lab"===e?"bg-primary text-white":"bg.gray.light text.text-dark"),children:"Lab"})]})]}),"profile"===e?a.jsx(x,{profile:l,profileForm:f,setProfileForm:j,profileImagePreview:N,setProfileImagePreview:y,editing:m,setEditing:p,fetchData:F}):a.jsx(g,{lab:n,labForm:b,setLabForm:v,labImagePreview:w,setLabImagePreview:A,editing:h,setEditing:u,fetchData:F})]})},x=({profile:e,profileForm:t,setProfileForm:n,profileImagePreview:o,setProfileImagePreview:d,editing:c,setEditing:m,fetchData:p})=>{const x=e=>{const{name:a,value:t,files:s}=e.target;s&&s[0]?(d(URL.createObjectURL(s[0])),n(e=>({...e,[a]:s[0]}))):n(e=>({...e,[a]:t}))};return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",name:"profileImage",accept:"image/*",className:"hidden",onChange:x}),a.jsx("img",{src:o||"https://via.placeholder.com/150",alt:"Profile",className:"w-32 h-32 rounded-full shadow-lg object-cover border-4 border-primary"})]})}),a.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx(u,{name:"firstName",value:t.firstName,onChange:x}),a.jsx(u,{name:"lastName",value:t.lastName,onChange:x}),a.jsx(u,{name:"email",value:t.email,onChange:x}),a.jsx(u,{name:"phoneNo",value:t.phoneNo,onChange:x})]}):a.jsxs(a.Fragment,{children:[a.jsx(h,{icon:a.jsx(i,{}),title:"First Name",value:null==e?void 0:e.firstName}),a.jsx(h,{icon:a.jsx(i,{}),title:"Last Name",value:null==e?void 0:e.lastName}),a.jsx(h,{icon:a.jsx(l,{}),title:"Email",value:null==e?void 0:e.email}),a.jsx(h,{icon:a.jsx(r,{}),title:"Phone No",value:null==e?void 0:e.phoneNo})]})}),a.jsx(f,{editing:c,onEdit:()=>m(!0),onSave:async()=>{const e=new FormData;e.append("firstName",t.firstName),e.append("lastName",t.lastName),e.append("email",t.email),e.append("phoneNo",t.phoneNo),t.profileImage instanceof File&&e.append("profileImage",t.profileImage);try{const a=await fetch("/api/labadmin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:e}),t=await a.json();t.success?(s.success("Profile updated successfully!"),p(),m(!1)):s.error(t.message||"Failed to update profile")}catch(a){}},onCancel:()=>m(!1)})]})},g=({lab:e,labForm:t,setLabForm:i,labImagePreview:l,setLabImagePreview:r,editing:p,setEditing:x,fetchData:g})=>{const j=e=>{const{name:a,value:t,files:s}=e.target;s&&s[0]?(r(URL.createObjectURL(s[0])),i(e=>({...e,[a]:s[0]}))):i(e=>({...e,[a]:t}))};return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",name:"profileImage",accept:"image/*",className:"hidden",onChange:j}),a.jsx("img",{src:l||"https://via.placeholder.com/300x200",alt:"Lab",className:"w-32 h-32 rounded-lg object-cover border-4 border-primary"})]}),a.jsxs("div",{className:"flex items-center",children:[(null==e?void 0:e.isActive)?a.jsx(n,{className:"text-success",size:24}):a.jsx(o,{className:"text-error",size:24}),a.jsx("span",{className:"ml-2 text.text-dark",children:(null==e?void 0:e.isActive)?"Active":"Inactive"})]})]}),a.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:p?a.jsxs(a.Fragment,{children:[a.jsx(u,{name:"name",value:t.name,onChange:j}),a.jsx(u,{name:"location",value:t.location,onChange:j}),a.jsx(u,{name:"address",value:t.address,onChange:j})]}):a.jsxs(a.Fragment,{children:[a.jsx(h,{icon:a.jsx(d,{}),title:"Lab Name",value:null==e?void 0:e.name}),a.jsx(h,{icon:a.jsx(m,{}),title:"Location",value:null==e?void 0:e.location}),a.jsx(h,{icon:a.jsx(c,{}),title:"Address",value:null==e?void 0:e.address})]})}),a.jsx(f,{editing:p,onEdit:()=>x(!0),onSave:async()=>{const e=new FormData;e.append("name",t.name),e.append("location",t.location),e.append("address",t.address),e.append("isActive",t.isActive),t.profileImage instanceof File&&e.append("profileImage",t.profileImage);try{const a=await fetch("/api/labadmin/lab",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:e}),t=await a.json();t.success?(s.success("Lab updated successfully!"),g(),x(!1)):s.error(t.message||"Failed to update lab")}catch(a){s.error("Something went wrong updating lab")}},onCancel:()=>x(!1)})]})},h=({icon:e,title:t,value:s})=>a.jsxs("div",{className:"flex items-center gap-4 bg.gray.lighter rounded-md p-4",children:[a.jsx("div",{className:"text-primary",children:e}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text.text-light",children:t}),a.jsx("p",{className:"text-lg font-semibold text.text-dark",children:s||"-"})]})]}),u=({name:e,value:t,onChange:s})=>a.jsx("input",{type:"text",name:e,value:t,onChange:s,className:"w-full px-4 py-2 border border.border.DEFAULT rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:e.charAt(0).toUpperCase()+e.slice(1)}),f=({editing:e,onEdit:t,onSave:s,onCancel:i})=>a.jsx("div",{className:"mt-6 flex gap-4",children:e?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:s,className:"bg-secondary text-white px-6 py-2 rounded-md hover:bg-primary/90",children:"Save"}),a.jsx("button",{onClick:i,className:"bg.gray.dark text-white px-6 py-2 rounded-md hover:bg.gray.DEFAULT",children:"Cancel"})]}):a.jsx("button",{onClick:t,className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary/80",children:"Edit"})});export{p as default};
