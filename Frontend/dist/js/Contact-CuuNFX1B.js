import{j as e}from"./ui-vendor-D_YnDhxq.js";import{a as s}from"./react-vendor-B1YRfcvv.js";import{u as a}from"./index-BIodPqjN.js";import{J as t,G as r,K as l,L as i,w as n,M as o,N as d}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";const c={name:"",email:"",receiverType:"support",labId:"",subject:"",message:"",_honeypot:""},m=()=>{const[m,x]=s.useState(c),[u,g]=s.useState({}),[h,b]=s.useState(!1),[p,j]=s.useState([]),[y,f]=s.useState(""),[v,N]=s.useState(!1),[w,S]=s.useState(0),k=s.useRef(!0);s.useEffect(()=>(k.current=!0,C(),()=>{k.current=!1}),[]);const C=async()=>{try{const e=new AbortController,s=e.signal,a=setTimeout(()=>e.abort(),1e4),{data:r}=await t("/api/query/labs/all",{signal:s}).catch(e=>{if("AbortError"!==e.name)throw e});if(clearTimeout(a),!k.current)return;(null==r?void 0:r.labs)?j(r.labs):j([])}catch(e){}},I=e=>{const{name:s,value:a}=e.target;x(e=>({...e,[s]:a})),"message"===s&&S(a.length),g(e=>({...e,[s]:void 0}))},T=p.filter(e=>`${e.name} ${e.location||""}`.toLowerCase().includes(y.toLowerCase()));return e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-b from-gray-50 to-white py-20",children:[e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute -left-32 -top-32 w-96 h-96 rounded-full bg-indigo-500/6 blur-3xl"}),e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute -right-40 -bottom-40 w-[420px] h-[420px] rounded-full bg-cyan-500/6 blur-3xl"}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-gray-900",children:"Contact Us"}),e.jsx("p",{className:"mt-3 text-lg text-gray-600 max-w-2xl mx-auto",children:"Have a question, feedback, or need help? Send us a message and our team will respond quickly."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("aside",{className:"h-full flex flex-col rounded-2xl bg-white/90 backdrop-blur-md border border-gray-200/60 p-8 shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Get in touch"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Our team is available to assist you with bookings, lab partnerships, technical support, and more."}),e.jsxs("ul",{className:"space-y-6",children:[e.jsxs("li",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-gradient-to-br from-indigo-600 to-purple-600 text-white flex items-center justify-center shadow",children:e.jsx(r,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Fast response"}),e.jsx("p",{className:"text-sm text-gray-600",children:"We typically reply within 24 hours on business days."})]})]}),e.jsxs("li",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-gradient-to-br from-teal-500 to-emerald-500 text-white flex items-center justify-center shadow",children:e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 9 6.343 9 8s1.343 3 3 3z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Secure & private"}),e.jsx("p",{className:"text-sm text-gray-600",children:"We use industry-standard encryption to protect your data and communications."})]})]}),e.jsxs("li",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg bg-gradient-to-br from-orange-400 to-rose-500 text-white flex items-center justify-center shadow",children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:e.jsx("path",{d:"M3 10h4l3 9 4-18 3 9h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"24/7 emergency support"}),e.jsx("p",{className:"text-sm text-gray-600",children:"For urgent matters, we have dedicated channels available any time."})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Common Questions"}),e.jsxs("dl",{className:"text-sm space-y-3 text-gray-600",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"How fast will I get a reply?"}),e.jsx("dd",{className:"text-xs mt-1",children:"Our goal is to respond within 24 hours on business days."})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"Is my data secure?"}),e.jsx("dd",{className:"text-xs mt-1",children:"Yes — encrypted in transit and at rest. We follow best practices for privacy."})]})]})]})]}),e.jsx("main",{className:"h-full",children:e.jsxs("form",{onSubmit:async e=>{var s,t,r,l;e.preventDefault();const i=((e=m)=>{const s={};return(!e.name||e.name.trim().length<2)&&(s.name="Please enter your full name."),e.email&&/^\S+@\S+\.\S+$/.test(e.email)||(s.email="Please enter a valid email."),(!e.subject||e.subject.trim().length<3)&&(s.subject="Please add a subject."),(!e.message||e.message.trim().length<10)&&(s.message="Message must be at least 10 characters."),"labadmin"!==e.receiverType||e.labId||(s.labId="Please select a lab."),e._honeypot&&""!==e._honeypot.trim()&&(s._honeypot="Spam detected."),s})();if(Object.keys(i).length>0){g(i);const e=Object.values(i)[0];return void a.error(e)}b(!0);const n={name:m.name.trim(),email:m.email.trim(),receiverType:m.receiverType,labId:"labadmin"===m.receiverType?m.labId:null,subject:m.subject.trim(),message:m.message.trim()};try{const{data:e}=await d("/api/query/submit",n);e?(a.success("Message sent successfully!"),setTimeout(()=>{k.current&&(x(c),S(0),f(""))},600)):a.error("Unexpected response from server. Please try again.")}catch(o){const e=null==(t=null==(s=null==o?void 0:o.response)?void 0:s.data)?void 0:t.message,i=(null==(l=null==(r=null==o?void 0:o.response)?void 0:r.data)?void 0:l.errors)||null;i&&"object"==typeof i&&g(e=>({...e,...i})),a.error(e||"Something went wrong. Please try again.")}finally{k.current&&b(!1)}},"aria-labelledby":"contact-title",className:"relative rounded-2xl bg-white/95 backdrop-blur-md p-8 sm:p-10 border border-gray-200/60 shadow-lg",noValidate:!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{id:"contact-title",className:"text-2xl font-semibold text-gray-900",children:"Send us a message"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{"aria-live":"polite",className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-100 text-xs text-gray-700",children:h?e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"animate-spin w-3 h-3"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"w-3 h-3 text-green-500"}),"Ready"]})})]})]}),e.jsx("input",{type:"text",name:"_honeypot",value:m._honeypot,onChange:e=>x(s=>({...s,_honeypot:e.target.value})),className:"hidden",tabIndex:-1,autoComplete:"off"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-700 mb-2",children:"Full name"}),e.jsx("input",{name:"name",type:"text",value:m.name,onChange:I,placeholder:"Jane Doe",required:!0,className:`w-full p-3 rounded-lg border ${u.name?"border-rose-500":"border-gray-200"} bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300`,"aria-invalid":!!u.name,"aria-describedby":u.name?"error-name":void 0}),u.name&&e.jsx("span",{id:"error-name",className:"text-xs text-rose-600 mt-1",children:u.name})]}),e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-700 mb-2",children:"Email"}),e.jsx("input",{name:"email",type:"email",value:m.email,onChange:I,placeholder:"you@company.com",required:!0,className:`w-full p-3 rounded-lg border ${u.email?"border-rose-500":"border-gray-200"} bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300`,"aria-invalid":!!u.email,"aria-describedby":u.email?"error-email":void 0}),u.email&&e.jsx("span",{id:"error-email",className:"text-xs text-rose-600 mt-1",children:u.email})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-700 mb-2",children:"Send to"}),e.jsxs("select",{name:"receiverType",value:m.receiverType,onChange:e=>{I(e),"labadmin"!==e.target.value&&(x(e=>({...e,labId:""})),f(""))},className:"w-full p-3 rounded-lg border border-gray-200 bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300",children:[e.jsx("option",{value:"support",children:"Support Team"}),e.jsx("option",{value:"labadmin",children:"Lab Admin"})]})]}),"labadmin"===m.receiverType?e.jsxs("div",{className:"flex flex-col relative",children:[e.jsx("span",{className:"text-sm text-gray-700 mb-2",children:"Select lab"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",role:"combobox","aria-expanded":v,"aria-controls":"lab-listbox",value:y,onChange:e=>{f(e.target.value),N(!0)},onFocus:()=>N(!0),placeholder:"Search labs...",className:`w-full p-3 pr-10 rounded-lg border ${u.labId?"border-rose-500":"border-gray-200"} bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300`}),e.jsx("button",{type:"button",onClick:()=>{f(""),N(e=>!e)},"aria-label":"Toggle labs",className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-md text-gray-500 hover:bg-gray-100",children:v?e.jsx(i,{className:"w-4 h-4"}):e.jsx(n,{className:"w-4 h-4"})})]}),v&&e.jsxs("ul",{id:"lab-listbox",role:"listbox",className:"mt-2 z-20 absolute w-full max-h-56 overflow-auto rounded-lg bg-white border border-gray-200 shadow-lg",children:[0===T.length&&e.jsx("li",{className:"px-4 py-3 text-sm text-gray-500",children:"No labs found."}),T.map(s=>e.jsxs("li",{role:"option","aria-selected":m.labId===s._id,onClick:()=>(e=>{x(s=>({...s,labId:e._id})),f(e.name),N(!1),g(e=>({...e,labId:void 0}))})(s),className:"cursor-pointer px-4 py-3 hover:bg-indigo-50 flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),s.location&&e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.location})]}),e.jsx("div",{className:"text-xs text-gray-400",children:s.rating?`${s.rating}⭐`:""})]},s._id))]})]}),u.labId&&e.jsx("span",{className:"text-xs text-rose-600 mt-1",children:u.labId})]}):e.jsx("div",{})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{name:"subject",type:"text",value:m.subject,onChange:I,placeholder:"Short summary",required:!0,className:`w-full p-3 rounded-lg border ${u.subject?"border-rose-500":"border-gray-200"} bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300`,"aria-invalid":!!u.subject,"aria-describedby":u.subject?"error-subject":void 0}),u.subject&&e.jsx("span",{id:"error-subject",className:"text-xs text-rose-600 mt-1",children:u.subject})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{name:"message",value:m.message,onChange:I,placeholder:"Write your message...",rows:7,required:!0,className:`w-full p-3 rounded-lg border ${u.message?"border-rose-500":"border-gray-200"} bg-gray-50 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-300 resize-none`,"aria-invalid":!!u.message,"aria-describedby":u.message?"error-message":void 0}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[u.message?e.jsx("span",{id:"error-message",className:"text-rose-600",children:u.message}):e.jsx("span",{children:" "}),e.jsxs("span",{children:[w,"/2000"]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:h,className:`w-full inline-flex items-center justify-center gap-3 rounded-lg px-6 py-3 text-white font-medium ${h?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"} focus:outline-none focus:ring-2 focus:ring-indigo-300 disabled:opacity-60`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"animate-spin w-4 h-4"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4"}),"Send Message"]})})}),e.jsx("div",{"aria-live":"polite",className:"mt-4"})]})})]})]})]})};export{m as default};
