import{j as e}from"./ui-vendor-D_YnDhxq.js";import{a as s}from"./react-vendor-B1YRfcvv.js";import{a1 as a,a2 as t,G as r,a3 as l,K as d,i,a4 as o}from"./index-BpOdPcLd.js";import{u as n}from"./index-BIodPqjN.js";import{R as c,B as x,X as m,Y as h,T as j,p as g,q as p,P as b,n as u,o as f}from"./PieChart-BDEU2mqo.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";import"./index-Cc9Rvcfl.js";const v=()=>{const[v,N]=s.useState({totalTests:0,totalPackages:0,totalOrders:0,pendingOrders:0,completedOrders:0,cancelledOrders:0,inProgressOrders:0,completionRate:0,ordersOverTime:[],testPackages:[],totalEarnings:0,pendingReports:0}),[w,k]=s.useState(!0);if(s.useEffect(()=>{(async()=>{try{const e=await fetch("/api/labadmin/labdashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),s=await e.json();s.success?N(s.data):n.error(s.message||"Failed to load dashboard")}catch(e){n.error("Something went wrong while fetching data.")}finally{k(!1)}})()},[]),w)return e.jsx("div",{className:"text-center py-10",children:"Loading Dashboard..."});const{totalTests:O,totalPackages:P,totalOrders:T,pendingOrders:R,completedOrders:z,cancelledOrders:K,inProgressOrders:I,completionRate:C,ordersOverTime:S,testPackages:E,totalEarnings:$,pendingReports:L}=v,B=[{name:"Tests",value:O},{name:"Packages",value:P}],D=["#09acb4","#05a1a8"];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-text-dark mb-2",children:"Lab Dashboard"}),e.jsx("p",{className:"text-text-tertiary mb-6",children:"Snapshot of your labâ€™s performance"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx(y,{title:"Total Orders",value:T,icon:e.jsx(a,{size:24})}),e.jsx(y,{title:"Pending Orders",value:R,icon:e.jsx(t,{size:24})}),e.jsx(y,{title:"Completed Orders",value:z,icon:e.jsx(r,{size:24})}),e.jsx(y,{title:"Cancelled Orders",value:K,icon:e.jsx(l,{size:24})}),e.jsx(y,{title:"In Progress",value:I,icon:e.jsx(d,{size:24})}),e.jsx(y,{title:"Tests & Packages",value:O+P,icon:e.jsx(i,{size:24})}),e.jsx(y,{title:"Reports Pending",value:L,icon:e.jsx(t,{size:24})}),e.jsx(y,{title:"Total Earnings",value:`PKR ${$.toLocaleString()}`,icon:e.jsx(o,{size:24})})]})]}),e.jsxs("div",{className:"bg-bg-secondary p-6 rounded-lg shadow-primary",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-dark",children:"Order Completion Rate"}),e.jsx("div",{className:"relative w-full h-5 bg-border-light rounded-full overflow-hidden mt-3",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-500",style:{width:`${C}%`}})}),e.jsxs("p",{className:"mt-2 text-text-secondary",children:[C,"% completed"]})]}),e.jsxs("div",{className:"bg-bg-primary p-6 rounded-lg shadow-primary",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Orders Over Time"}),e.jsx(c,{width:"100%",height:350,children:e.jsxs(x,{data:S,children:[e.jsx(m,{dataKey:"date",stroke:"#4b5563"}),e.jsx(h,{stroke:"#4b5563"}),e.jsx(j,{}),e.jsx(g,{}),e.jsx(p,{dataKey:"Pending",stackId:"a",fill:"#f59e0b"}),e.jsx(p,{dataKey:"InProgress",stackId:"a",fill:"#3b82f6"}),e.jsx(p,{dataKey:"Completed",stackId:"a",fill:"#10b981"}),e.jsx(p,{dataKey:"Cancelled",stackId:"a",fill:"#ef4444"})]})})]}),e.jsxs("div",{className:"bg-bg-secondary p-6 rounded-lg shadow-primary",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Test vs Package Ratio"}),e.jsx(c,{width:"100%",height:300,children:e.jsxs(b,{children:[e.jsx(u,{data:B,cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",dataKey:"value",label:!0,children:B.map((s,a)=>e.jsx(f,{fill:D[a%D.length]},`cell-${a}`))}),e.jsx(j,{}),e.jsx(g,{})]})})]}),e.jsxs("div",{className:"bg-bg-primary p-6 rounded-lg shadow-primary",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-dark mb-4",children:"Offered Tests & Packages"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===E.length?e.jsx("p",{className:"text-text-secondary",children:"No test or package added yet."}):E.map(s=>e.jsxs("div",{className:"bg-white border border-border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-md font-bold text-text-primary",children:s.name}),e.jsx("span",{className:"text-xs text-white bg-primary px-2 py-1 rounded-full",children:s.type})]}),e.jsxs("p",{className:"text-sm text-text-tertiary mt-2",children:["PKR ",s.price]})]},s._id))})]})]})},y=({title:s,value:a,icon:t})=>e.jsxs("div",{className:"bg-primary text-white p-4 rounded-2xl shadow-md flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsx("div",{children:t})]}),e.jsx("p",{className:"text-3xl font-bold text-center",children:a})]});export{v as default};
