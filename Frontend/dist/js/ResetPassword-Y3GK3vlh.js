import{j as s,c as e}from"./ui-vendor-D_YnDhxq.js";import{f as t,u as r,a}from"./react-vendor-B1YRfcvv.js";import{F as o,a as n,N as d}from"./index-BpOdPcLd.js";import"./redux-vendor-Cc4mDNFq.js";import"./utils-vendor-B4hhIH4d.js";const l=()=>{const{token:l}=t(),i=r(),[c,m]=a.useState({password:"",confirmPassword:""}),[u,p]=a.useState(!1),[x,w]=a.useState(!1),[h,j]=a.useState(!1),[b,f]=a.useState({}),y=s=>{const{name:e,value:t}=s.target;m(s=>({...s,[e]:t})),f(s=>({...s,[e]:""}))};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg-primary p-8",children:s.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:"Reset Password"}),s.jsxs("form",{onSubmit:async s=>{var t,r;if(s.preventDefault(),(()=>{const s={},{password:e,confirmPassword:t}=c;return!e||e.length<6?s.password="Password must be at least 6 characters.":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?#&])/.test(e)||(s.password="Must include upper, lower, number, and special character."),t!==e&&(s.confirmPassword="Passwords do not match."),f(s),0===Object.keys(s).length})()){p(!0);try{const s=await d(`/api/auth/reset-password/${l}`,c);200===s.status&&(e.success(s.data.message||"Password reset successful!"),i("/login"))}catch(a){e.error((null==(r=null==(t=null==a?void 0:a.response)?void 0:t.data)?void 0:r.message)||"Something went wrong!")}finally{p(!1)}}},className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-text-secondary mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:x?"text":"password",name:"password",value:c.password,onChange:y,className:"w-full px-4 py-2 border rounded-md focus:outline-none",placeholder:"Enter new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-3 text-text-secondary",children:x?s.jsx(o,{}):s.jsx(n,{})})]}),b.password&&s.jsx("p",{className:"text-error text-sm mt-1",children:b.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-text-secondary mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:h?"text":"password",name:"confirmPassword",value:c.confirmPassword,onChange:y,className:"w-full px-4 py-2 border rounded-md focus:outline-none",placeholder:"Confirm new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>j(!h),className:"absolute right-3 top-3 text-text-secondary",children:h?s.jsx(o,{}):s.jsx(n,{})})]}),b.confirmPassword&&s.jsx("p",{className:"text-error text-sm mt-1",children:b.confirmPassword})]}),s.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary text-white py-2 rounded-md hover:bg-primary-dark transition",children:u?"Resetting...":"Reset Password"})]})]})})};export{l as default};
