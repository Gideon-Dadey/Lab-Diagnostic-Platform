import{j as e,c as i}from"./ui-vendor-D_YnDhxq.js";import{k as s,a as r,u as a,L as t}from"./react-vendor-B1YRfcvv.js";import{a as l}from"./utils-vendor-B4hhIH4d.js";import{a as n}from"./index-EIlo7iDb.js";const c=()=>{const[c]=s(),[d,o]=r.useState("loading"),x=a(),m=c.get("token"),u=r.useRef(!1);r.useEffect(()=>{(async()=>{var e,s,r,a;if(m){if(!u.current){u.current=!0;try{const r=await l.get(`/api/users/verify-email?token=${m}`),a=(null==(e=r.data)?void 0:e.message)||"Email verified successfully!";if(null==(s=r.data)?void 0:s.alreadyVerified)return i.success("Email already verified. You can now log in."),void o("already-verified");i.success(a),o("success"),setTimeout(()=>{x("/login",{replace:!0})},3e3)}catch(t){i.error((null==(a=null==(r=null==t?void 0:t.response)?void 0:r.data)?void 0:a.message)||"Verification failed"),o("failed")}}}else o("invalid")})()},[m,x]);return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-bg-primary px-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-4",children:"Email Verification"}),(()=>{switch(d){case"loading":return e.jsxs("div",{className:"flex items-center space-x-3 text-lg text-primary",children:[e.jsx(n,{className:"animate-spin text-2xl"}),e.jsx("span",{children:"Verifying your email..."})]});case"success":return e.jsxs("div",{className:"text-green-600 text-xl font-semibold space-y-2",children:[e.jsx("p",{children:"Email verified! Redirecting to login..."}),e.jsxs("p",{children:["Not redirected? ",e.jsx(t,{to:"/login",className:"underline text-primary",children:"Click here"})]})]});case"already-verified":return e.jsxs("div",{className:"text-green-600 text-xl font-semibold space-y-2",children:[e.jsx("p",{children:"Your email is already verified."}),e.jsx(t,{to:"/login",className:"underline text-primary",children:"Click here to login"})]});case"failed":return e.jsxs("div",{className:"text-red-600 text-lg space-y-2",children:[e.jsx("p",{children:"Verification failed. Link may be invalid or expired."}),e.jsx(t,{to:"/login",className:"underline text-primary",children:"Go to login"})]});case"invalid":return e.jsxs("div",{className:"text-red-600 text-lg space-y-2",children:[e.jsx("p",{children:"Invalid verification link."}),e.jsx(t,{to:"/login",className:"underline text-primary",children:"Go to login"})]});default:return null}})()]})};export{c as default};
